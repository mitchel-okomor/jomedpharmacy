{"version":3,"file":"static/webpack/static\\development\\pages\\account.js.b5a3921a325ab15d9c9f.hot-update.js","sources":["webpack:///./components/login.js"],"sourcesContent":["import React, { useState, useReducer } from \"react\";\r\nimport css from './login.module.scss';\r\nimport axios from \"axios\";\r\nimport Loading from './loading';\r\n\r\n\r\nconst initialState = {\r\n  email: \"\",\r\n  password: \"\",\r\n  loading: false,\r\n  message: \"\"\r\n};\r\n\r\n//handle state changes with reducer\r\nconst reducer = (state, { field, value }) => {\r\n  return { ...state, [field]: value };\r\n};\r\n\r\nconst Login = (props) => {\r\n    //use reducer hook to dispatch change action\r\n  const [state, dispatch] = useReducer(reducer, initialState);\r\n  const handleChange = (e) => {\r\n    dispatch({ field: e.target.name, value: e.target.value });\r\n  };\r\n\r\n  //submit form data to backend server\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    dispatch({field:\"loading\", value:true});\r\n    const url = 'http://localhost:4000/logincustomer';\r\n    try{\r\n    const response = await axios.post(url, state, {\r\n      timeout: 30000\r\n    });\r\n    if(response.status==200){\r\n           console.log(\"passed: \"+JSON.stringify(response.data.message));\r\n           dispatch({field:\"message\", value:response.data.message}); \r\n     localStorage.setItem(\"customerId\", response.data.customer.id);\r\n     localStorage.setItem(\"token\", response.data.info.token);\r\n     dispatch({field:\"loading\", value:false}); \r\n    }\r\n    else{\r\n      console.log(\"failed: \"+response.data)\r\n      dispatch({field:\"message\", value:response.data.message}); \r\n      dispatch({field:\"loading\", value:false}); \r\n\r\n    }\r\n  }\r\n    catch(error){\r\n      console.log(error);\r\n      dispatch({field:\"loading\", value:false}); \r\n    }  \r\n  };\r\n\r\n\r\n  const {email, password, loading, message } = state;\r\n  if(loading){\r\n    return <Loading />\r\n        }\r\n  return (\r\n\r\n      <div className={css.form}>\r\n        <form className={css.login}>\r\n          <fieldset>\r\n            <legend>Login:</legend>\r\n            <label for=\"email-address\">Email:</label> <br />\r\n            <input\r\n              type=\"email\"\r\n              id=\"email-address\"\r\n              name=\"email\"\r\n              value={email}\r\n              onChange={handleChange}\r\n            />\r\n            <br />\r\n            <label for=\"login-password\">password:</label> <br />\r\n            <input\r\n              type=\"password\"\r\n              id=\"login-password\"\r\n              name=\"password\"\r\n              value={password}\r\n              onChange={handleChange}\r\n            />\r\n            <button onClick={handleSubmit}>Submit</button>\r\n            <br/>\r\n  <div>{message}</div>\r\n          </fieldset>\r\n        </form>\r\n      </div>\r\n    \r\n  );\r\n};\r\n\r\nexport default Login;\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AAJA;AACA;AAOA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AADA;AAAA;AAAA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAHA;AAAA;AAAA;AAMA;AADA;AACA;AANA;AAKA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAEA;AACA;AArBA;AAAA;AACA;AADA;AAAA;AAAA;AAuBA;AACA;AAAA;AAAA;AAAA;AACA;AAzBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AATA;AAAA;AAAA;AAAA;AACA;AAqCA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AACA;AACA;;;;A","sourceRoot":""}