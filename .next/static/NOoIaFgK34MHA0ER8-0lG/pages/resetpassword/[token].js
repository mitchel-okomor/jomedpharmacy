(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{aumz:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/resetpassword/[token]",function(){return a("fIl9")}])},fIl9:function(e,t,a){"use strict";a.r(t);var n=a("o0o1"),r=a.n(n),s=a("q1tI"),o=a.n(s),u=a("vDqi"),c=a.n(u),l=a("5qA4"),i=a.n(l),p=a("nOHt"),d=o.a.createElement,w=function(e){var t=e.valid,a=e.token,n=Object(p.useRouter)(),u=Object(s.useState)(),l=u[0],w=u[1],h=Object(s.useState)(),v=h[0],b=h[1],m=Object(s.useState)(),g=m[0],k=m[1];return d("div",{className:i.a.reset},d("br",null),d("br",null),d("h2",{style:f},"Forget password"),d("br",null),t?d(o.a.Fragment,null,d("p",{style:f},"Enter your new password."),d("br",null),d("form",{onSubmit:function(e){var t;return r.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(e.preventDefault(),l!=v){s.next=15;break}return s.prev=2,s.next=5,r.a.awrap(c.a.post("http://localhost:4000/resetpassword/"+a,{password:l},{timeout:3e4}));case 5:t=s.sent,console.log(t),200===t.status?(alert("Password changed successfully"),n.push("/account")):alert("Something went wrong, please try again"),s.next=13;break;case 10:s.prev=10,s.t0=s.catch(2),console.log(s.t0);case 13:s.next=16;break;case 15:k("Password did not match, please check again");case 16:case"end":return s.stop()}}),null,null,[[2,10]],Promise)}},d("div",null,d("input",{type:"password",placeholder:"New password",id:"password",value:l,onChange:function(e){return w(e.target.value)}}),d("br",null),d("input",{type:"password",id:"confirm_password",placeholder:"Confirm password",value:v,onChange:function(e){return b(e.target.value)}})),d("div",{className:i.a.message},g),d("button",{className:i.a.set_password_button,type:"submit"},"Set new password"))):d("p",{className:g},"This link may have been expired"))},f={margin:"auto","text-align":"center"};w.getInitialProps=function(e){var t,a;return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.query.token,n.prev=1,n.next=4,r.a.awrap(fetch("http://localhost:4000/verifytoken/".concat(t),{method:"GET"}));case 4:if(a=n.sent,console.log(a),200!==a.status){n.next=10;break}return n.abrupt("return",{token:t,valid:!0});case 10:return n.abrupt("return",{valid:!1});case 11:n.next=16;break;case 13:n.prev=13,n.t0=n.catch(1),console.log(n.t0);case 16:case"end":return n.stop()}}),null,null,[[1,13]],Promise)},t.default=w}},[["aumz",0,1,3,4,5,2]]]);