{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\User PC\\\\workspace\\\\jomed\\\\jomed-pharmacy\\\\pages\\\\admin.js\";\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport css from './admin.module.scss';\nimport { useEffect, useState } from \"react\";\nimport Link from 'next/link';\nimport axios from 'axios';\nimport Loading from '../components/loading';\n\nvar Admin = function Admin() {\n  var _jsx;\n\n  var _useState = useState([\"o\", \"p\"]),\n      products = _useState[0],\n      setProducts = _useState[1];\n\n  var _useState2 = useState(false),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var _useState3 = useState(),\n      name = _useState3[0],\n      setName = _useState3[1];\n\n  var _useState4 = useState(),\n      description = _useState4[0],\n      setDescription = _useState4[1];\n\n  var _useState5 = useState(),\n      price = _useState5[0],\n      setPrice = _useState5[1];\n\n  var _useState6 = useState(),\n      category = _useState6[0],\n      setCategory = _useState6[1];\n\n  var _useState7 = useState(),\n      image = _useState7[0],\n      setImage = _useState7[1];\n\n  useEffect(function () {\n    getProducts();\n  }, []);\n\n  var getProducts = function getProducts() {\n    var res, data;\n    return _regeneratorRuntime.async(function getProducts$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(fetch('http://localhost:4000/products'));\n\n          case 3:\n            res = _context.sent;\n            _context.next = 6;\n            return _regeneratorRuntime.awrap(res.json());\n\n          case 6:\n            data = _context.sent;\n            setProducts(data.data);\n            _context.next = 14;\n            break;\n\n          case 10:\n            _context.prev = 10;\n            _context.t0 = _context[\"catch\"](0);\n            console.log(\"Unable to load Products\");\n            setProducts(\"\");\n\n          case 14:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 10]], Promise);\n  };\n\n  var addButton = function addButton() {\n    var elem = document.getElementsByClassName(\"admin_form\")[0];\n    elem.style.display === \"block\" ? elem.style.display = \"none\" : elem.style.display = \"block\";\n  }; //get form values\n\n\n  var handleChange = function handleChange(e) {\n    console.log(e.target.value);\n\n    switch (e.target.name) {\n      case \"name\":\n        setName(e.target.value);\n        break;\n\n      case \"price\":\n        setPrice(e.target.value);\n        break;\n\n      case \"category\":\n        setCategory(e.target.value);\n        break;\n\n      case \"description\":\n        setDescription(e.target.value);\n        break;\n\n      case \"image\":\n        setImage(e.target.files[0]);\n    }\n\n    console.log(image);\n  }; //submit form data to backend server\n\n\n  var handleSubmit = function handleSubmit(e) {\n    var formData, url, response;\n    return _regeneratorRuntime.async(function handleSubmit$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            setLoading(true);\n            e.preventDefault();\n            formData = new FormData();\n            formData.append(\"name\", name);\n            formData.append(\"price\", price);\n            formData.append(\"category\", category);\n            formData.append(\"description\", description);\n            formData.append(\"image\", image);\n            url = 'http://localhost:4000/product';\n            _context2.prev = 9;\n            _context2.next = 12;\n            return _regeneratorRuntime.awrap(axios.post(url, formData, {\n              headers: {\n                'Content-Type': 'multipart/form-data'\n              },\n              timeout: 30000\n            }));\n\n          case 12:\n            response = _context2.sent;\n\n            if (response.status == 200) {\n              console.log(response);\n              setLoading(false);\n            }\n\n            _context2.next = 20;\n            break;\n\n          case 16:\n            _context2.prev = 16;\n            _context2.t0 = _context2[\"catch\"](9);\n            console.log(_context2.t0);\n            setLoading(false);\n\n          case 20:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, [[9, 16]], Promise);\n  };\n\n  var handleDelete = function handleDelete(id) {\n    var url, response;\n    return _regeneratorRuntime.async(function handleDelete$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            console.log(id);\n            setLoading(true);\n            url = 'http://localhost:4000/product/' + id;\n            _context3.prev = 3;\n            _context3.next = 6;\n            return _regeneratorRuntime.awrap(axios[\"delete\"](url, {\n              timeout: 30000\n            }));\n\n          case 6:\n            response = _context3.sent;\n\n            if (response.status == 200) {\n              console.log(response);\n              setLoading(false);\n            }\n\n            _context3.next = 15;\n            break;\n\n          case 10:\n            _context3.prev = 10;\n            _context3.t0 = _context3[\"catch\"](3);\n            console.log(_context3.t0);\n            setLoading(false);\n            alert(\"failed to delete\");\n\n          case 15:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, [[3, 10]], Promise);\n  };\n\n  if (loading) {\n    return __jsx(Loading, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 10\n      }\n    });\n  }\n\n  return __jsx(\"div\", {\n    className: css.admin,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 9\n    }\n  }, __jsx(\"h1\", {\n    className: css.admin_header,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 1\n    }\n  }, \"Admin Page\"), __jsx(\"div\", {\n    className: css.add_product,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 13\n    }\n  }, __jsx(\"button\", {\n    onClick: addButton,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 17\n    }\n  }, \"Add product\"), __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 17\n    }\n  }, __jsx(\"form\", (_jsx = {\n    className: css.show\n  }, _defineProperty(_jsx, \"className\", \"admin_form\"), _defineProperty(_jsx, \"__self\", _this), _defineProperty(_jsx, \"__source\", {\n    fileName: _jsxFileName,\n    lineNumber: 128,\n    columnNumber: 17\n  }), _jsx), __jsx(\"label\", {\n    \"for\": \"name\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 5\n    }\n  }, \"Name\"), __jsx(\"input\", {\n    type: \"text\",\n    id: \"name\",\n    name: \"name\",\n    placeholder: \"product name\",\n    value: name,\n    onChange: handleChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 5\n    }\n  }), __jsx(\"label\", {\n    \"for\": \"price\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 5\n    }\n  }, \"Price\"), __jsx(\"input\", {\n    type: \"text\",\n    id: \"price\",\n    name: \"price\",\n    placeholder: \"product price\",\n    value: price,\n    onChange: handleChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 5\n    }\n  }), __jsx(\"label\", {\n    \"for\": \"description\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 5\n    }\n  }, \"Description\"), __jsx(\"textarea\", {\n    type: \"text\",\n    id: \"description\",\n    name: \"description\",\n    placeholder: \"Product Description\",\n    value: description,\n    onChange: handleChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 5\n    }\n  }), __jsx(\"label\", {\n    \"for\": \"category\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 5\n    }\n  }, \"category\"), __jsx(\"select\", {\n    id: \"category\",\n    name: \"category\",\n    onChange: handleChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 5\n    }\n  }, __jsx(\"option\", {\n    value: \"antibiotics\",\n    selected: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 7\n    }\n  }, \"Antibiotics\"), __jsx(\"option\", {\n    value: \"antidiabetics\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 7\n    }\n  }, \"Antidiabetics\"), __jsx(\"option\", {\n    value: \"antimaleria\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 7\n    }\n  }, \"Antimaleria\")), __jsx(\"button\", {\n    onClick: handleSubmit,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 5\n    }\n  }, \"Submit\"), __jsx(\"br\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 5\n    }\n  }), __jsx(\"label\", {\n    \"for\": \"image\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 5\n    }\n  }, \"Upload image\"), __jsx(\"input\", {\n    type: \"file\",\n    id: \"image\",\n    name: \"image\",\n    placeholder: \"Select Image\",\n    onChange: handleChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 5\n    }\n  })))), __jsx(\"table\", {\n    className: css.table,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 2\n    }\n  }, __jsx(\"thead\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 9\n    }\n  }, __jsx(\"tr\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 11\n    }\n  }, __jsx(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 15\n    }\n  }, \"Product\")), __jsx(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 15\n    }\n  }, \"Category\")), __jsx(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 15\n    }\n  }, \"Price\")), __jsx(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 15\n    }\n  }, \"In stock\")), __jsx(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 15\n    }\n  }, \"Action\")))), __jsx(\"tbody\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 9\n    }\n  }, products.map(function (item) {\n    return __jsx(\"tr\", {\n      key: item.id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 13\n      }\n    }, __jsx(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 15\n      }\n    }, __jsx(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 17\n      }\n    }, __jsx(\"img\", {\n      src: \"http://localhost:4000/\" + item.image_url,\n      alt: \"\",\n      width: \"40em\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 19\n      }\n    }), __jsx(\"br\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 19\n      }\n    }), __jsx(Link, {\n      href: \"/products/[id]\",\n      as: \"/products/\".concat(item.id),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 19\n      }\n    }, __jsx(\"a\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 1\n      }\n    }, \" \", item.name)))), __jsx(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 15\n      }\n    }, __jsx(\"strong\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 17\n      }\n    }, item.category)), __jsx(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 15\n      }\n    }, __jsx(\"strong\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 17\n      }\n    }, \"\\u20A6 \", item.price)), __jsx(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 15\n      }\n    }, item.quantity), __jsx(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 17\n      }\n    }, __jsx(\"button\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 17\n      }\n    }, \"Edit\"), __jsx(\"button\", {\n      onClick: function onClick() {\n        handleDelete(item.id);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 17\n      }\n    }, \"Delete\")));\n  }))));\n};\n\nexport default Admin;","map":{"version":3,"sources":["C:/Users/User PC/workspace/jomed/jomed-pharmacy/pages/admin.js"],"names":["css","useEffect","useState","Link","axios","Loading","Admin","products","setProducts","loading","setLoading","name","setName","description","setDescription","price","setPrice","category","setCategory","image","setImage","getProducts","fetch","res","json","data","console","log","addButton","elem","document","getElementsByClassName","style","display","handleChange","e","target","value","files","handleSubmit","preventDefault","formData","FormData","append","url","post","headers","timeout","response","status","handleDelete","id","alert","admin","admin_header","add_product","show","table","map","item","image_url","quantity"],"mappings":"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","sourcesContent":["import css from './admin.module.scss';\r\nimport {useEffect, useState} from \"react\";\r\nimport Link from 'next/link';\r\nimport axios from 'axios';\r\nimport Loading from '../components/loading';\r\n\r\nconst Admin = ()=>{\r\n\r\n    const [products, setProducts] = useState([\"o\",\"p\"]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [name, setName] = useState();\r\n    const [description, setDescription] = useState();\r\n    const [price, setPrice] = useState();\r\n    const [category, setCategory] = useState();\r\n    const [image, setImage] = useState();\r\n\r\n    useEffect(()=>{\r\ngetProducts();\r\n    }, []);\r\n\r\n\r\n    const getProducts = async function() {\r\n        try{\r\n      const res = await fetch('http://localhost:4000/products');\r\n          const data = await res.json();\r\n         setProducts(data.data);\r\n        }catch{\r\n      console.log(\"Unable to load Products\");\r\n     setProducts(\"\")\r\n        }\r\n        };\r\n\r\n       const addButton = ()=>{\r\n        let elem = document.getElementsByClassName(\"admin_form\")[0];\r\n        elem.style.display === \"block\"?elem.style.display = \"none\":elem.style.display = \"block\";\r\n       }\r\n\r\n\r\n       //get form values\r\n       const handleChange = (e) =>{\r\n         console.log(e.target.value);\r\nswitch(e.target.name){\r\n  case \"name\":\r\n    setName(e.target.value);\r\n      break;\r\n    case \"price\":\r\n      setPrice(e.target.value);\r\n    break;\r\n    case \"category\":\r\n      setCategory(e.target.value);\r\n      break;\r\n    case \"description\":\r\n      setDescription(e.target.value)\r\n      break\r\n   case \"image\":\r\n   setImage(e.target.files[0]);\r\n \r\n       }\r\n       console.log(image);\r\n      }\r\n\r\n      \r\n        //submit form data to backend server\r\n        const handleSubmit =async (e) => {\r\n          setLoading(true);\r\n         e.preventDefault();\r\n         var formData = new FormData();\r\n         formData.append(\"name\", name);\r\n         formData.append(\"price\", price);\r\n         formData.append(\"category\", category);\r\n         formData.append(\"description\", description);\r\n         formData.append(\"image\", image);\r\n         \r\n      const url = 'http://localhost:4000/product';\r\n        try{\r\n        const response = await axios.post(url, formData, {\r\n          headers: {\r\n            'Content-Type': 'multipart/form-data'\r\n          },\r\n          timeout: 30000\r\n        });\r\n        if(response.status==200){\r\n         console.log(response);\r\n         setLoading(false);\r\n        }\r\n      }\r\n        catch(error){\r\n          console.log(error);\r\n          setLoading(false);\r\n        }\r\n        \r\n        };\r\n\r\n        const  handleDelete = async(id)=>{\r\n          console.log(id);\r\n          setLoading(true);\r\n          const url = 'http://localhost:4000/product/'+id;\r\n          try{\r\n          const response = await axios.delete(url,{\r\n            timeout: 30000\r\n          });\r\n          if(response.status==200){\r\n           console.log(response);\r\n           setLoading(false);\r\n          }\r\n        }\r\n          catch(error){\r\n            console.log(error);\r\n            setLoading(false);\r\n            alert(\"failed to delete\")\r\n          }\r\n          \r\n          };\r\n      \r\n\r\n\r\nif(loading){\r\n  return <Loading />\r\n}\r\n\r\n    return(\r\n        <div className={css.admin}>\r\n<h1 className={css.admin_header}>Admin Page</h1>\r\n            <div className={css.add_product}>\r\n              {/** Handle show upload form */}\r\n                <button onClick={addButton}>Add product</button>\r\n                <div>\r\n                <form className={css.show} className=\"admin_form\">\r\n    <label for=\"name\">Name</label>\r\n    <input type=\"text\" id=\"name\" name=\"name\" placeholder=\"product name\" value={name} onChange={handleChange}/>\r\n\r\n    <label for=\"price\">Price</label>\r\n    <input type=\"text\" id=\"price\" name=\"price\" placeholder=\"product price\" value={price} onChange={handleChange}/>\r\n    \r\n    <label for=\"description\">Description</label>\r\n    <textarea type=\"text\" id=\"description\" name=\"description\" placeholder=\"Product Description\" value={description} onChange={handleChange} />\r\n\r\n    <label for=\"category\">category</label>\r\n    <select id=\"category\" name=\"category\" onChange={handleChange}>\r\n      <option value=\"antibiotics\" selected>Antibiotics</option>\r\n      <option value=\"antidiabetics\">Antidiabetics</option>\r\n      <option value=\"antimaleria\">Antimaleria</option>\r\n    </select>\r\n    <button onClick={handleSubmit}>Submit</button>\r\n    <br />\r\n    <label for=\"image\">Upload image</label>\r\n    <input type=\"file\" id=\"image\" name=\"image\" placeholder=\"Select Image\"onChange={handleChange}/>\r\n  </form>\r\n                </div>\r\n            </div>\r\n \r\n <table className={css.table}>\r\n        <thead>\r\n          <tr>\r\n            <th >\r\n              <div >Product</div>\r\n            </th>\r\n            <th >\r\n              <div >Category</div>\r\n            </th>\r\n            <th >\r\n              <div >Price</div>\r\n            </th>\r\n            <th >\r\n              <div >In stock</div>\r\n            </th>\r\n            <th >\r\n              <div >Action</div>\r\n            </th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {\r\n          products.map((item) => (\r\n            <tr key={item.id}>\r\n              <td >\r\n                <div>\r\n                  <img\r\n                    src={\"http://localhost:4000/\"+item.image_url}\r\n                    alt=\"\"\r\n                    width=\"40em\"\r\n                  />\r\n                  <br />\r\n                  <Link href=\"/products/[id]\" as={`/products/${item.id}`}>\r\n<a> {item.name}</a></Link>            \r\n                </div>\r\n\r\n              </td>\r\n              <td >\r\n                <strong>{item.category}</strong>\r\n              </td>\r\n              <td >\r\n                <strong>â‚¦ {item.price}</strong>\r\n              </td>\r\n              <td>\r\n                {item.quantity}\r\n                </td>\r\n                <td>\r\n                <button>Edit</button>\r\n                <button onClick={()=>{handleDelete(item.id)}}>Delete</button>\r\n                </td>\r\n            </tr>\r\n           \r\n          ))}\r\n        </tbody>\r\n      </table>\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\n\r\n\r\nexport default Admin;"]},"metadata":{},"sourceType":"module"}