{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\User PC\\\\workspace\\\\jomed\\\\jomed-pharmacy\\\\pages\\\\checkout.js\";\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport css from './checkout.module.scss';\nimport { useEffect, useContext, useState } from 'react';\nimport appContext from \"../components/appcontext\";\nimport { useRouter } from 'next/router';\nimport axios from 'axios';\n\nvar Checkout = function Checkout() {\n  var _useContext = useContext(appContext),\n      customer = _useContext.customer,\n      cart = _useContext.cart;\n\n  var _useState = useState(\"\"),\n      message = _useState[0],\n      setMessage = _useState[1];\n\n  var router = useRouter();\n  useEffect(function () {\n    if (!customer) {\n      alert(\"please Login\");\n      router.push(\"/account\");\n    }\n  }, []);\n\n  var handleSubmit = function handleSubmit(event) {\n    var response;\n    return _regeneratorRuntime.async(function handleSubmit$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            event.preventDefault();\n            _context.next = 4;\n            return _regeneratorRuntime.awrap(axios.post(\"http://localhost:4000/order\", {\n              \"cart\": cart\n            }, {\n              timeout: 30000\n            }));\n\n          case 4:\n            response = _context.sent;\n            console.log(response);\n            setMessage(response.data.message);\n            _context.next = 13;\n            break;\n\n          case 9:\n            _context.prev = 9;\n            _context.t0 = _context[\"catch\"](0);\n            console.log(_context.t0);\n            setMessage(\"Error occured please try again\");\n\n          case 13:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 9]], Promise);\n  };\n\n  return __jsx(\"div\", {\n    className: css.checkout,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 9\n    }\n  }, __jsx(\"h2\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }\n  }, \"Web payment coming soon\"), __jsx(\"button\", {\n    onClick: handleSubmit,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }\n  }, \"Submit order\"));\n};\n\nexport default Checkout;","map":{"version":3,"sources":["C:/Users/User PC/workspace/jomed/jomed-pharmacy/pages/checkout.js"],"names":["css","useEffect","useContext","useState","appContext","useRouter","axios","Checkout","customer","cart","message","setMessage","router","alert","push","handleSubmit","event","preventDefault","post","timeout","response","console","log","data","checkout"],"mappings":";;;;;;;AAAA,OAAOA,GAAP,MAAgB,wBAAhB;AACA,SAAQC,SAAR,EAAmBC,UAAnB,EAA+BC,QAA/B,QAA8C,OAA9C;AACA,OAAOC,UAAP,MAAuB,0BAAvB;AACA,SAASC,SAAT,QAA0B,aAA1B;AACA,OAAOC,KAAP,MAAkB,OAAlB;;AAIA,IAAMC,QAAQ,GAAG,SAAXA,QAAW,GAAK;AAAA,oBACQL,UAAU,CAACE,UAAD,CADlB;AAAA,MACXI,QADW,eACXA,QADW;AAAA,MACDC,IADC,eACDA,IADC;;AAAA,kBAEYN,QAAQ,CAAC,EAAD,CAFpB;AAAA,MAEXO,OAFW;AAAA,MAEFC,UAFE;;AAGlB,MAAMC,MAAM,GAAGP,SAAS,EAAxB;AAGAJ,EAAAA,SAAS,CAAC,YAAI;AAClB,QAAG,CAACO,QAAJ,EAAa;AACTK,MAAAA,KAAK,CAAC,cAAD,CAAL;AACAD,MAAAA,MAAM,CAACE,IAAP,CAAY,UAAZ;AAEH;AACI,GANQ,EAMP,EANO,CAAT;;AAQA,MAAOC,YAAY,GAAG,SAAfA,YAAe,CAAOC,KAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEtBA,YAAAA,KAAK,CAACC,cAAN;AAFsB;AAAA,6CAGMX,KAAK,CAACY,IAAN,CAAW,6BAAX,EAA0C;AAAC,sBAAOT;AAAR,aAA1C,EAAyD;AAC9EU,cAAAA,OAAO,EAAE;AADqE,aAAzD,CAHN;;AAAA;AAGXC,YAAAA,QAHW;AAMvBC,YAAAA,OAAO,CAACC,GAAR,CAAYF,QAAZ;AACAT,YAAAA,UAAU,CAACS,QAAQ,CAACG,IAAT,CAAcb,OAAf,CAAV;AAPuB;AAAA;;AAAA;AAAA;AAAA;AASvBW,YAAAA,OAAO,CAACC,GAAR;AACAX,YAAAA,UAAU,CAAC,gCAAD,CAAV;;AAVuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAtB;;AAiBA,SACI;AAAK,IAAA,SAAS,EAAEX,GAAG,CAACwB,QAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BADE,EAEF;AAAQ,IAAA,OAAO,EAAET,YAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAFE,CADJ;AAOH,CAtCD;;AAyCA,eAAeR,QAAf","sourcesContent":["import css from './checkout.module.scss';\r\nimport {useEffect, useContext, useState} from 'react';\r\nimport appContext from \"../components/appcontext\";\r\nimport { useRouter } from 'next/router';\r\nimport axios from 'axios';\r\n\r\n\r\n\r\nconst Checkout = () =>{\r\n    const {customer, cart } = useContext(appContext);\r\n    const [message, setMessage] = useState(\"\");\r\n    const router = useRouter()\r\n\r\n\r\n    useEffect(()=>{\r\nif(!customer){\r\n    alert(\"please Login\");\r\n    router.push(\"/account\");\r\n\r\n}\r\n    },[])\r\n\r\n    const  handleSubmit = async (event) =>{\r\n        try{\r\n    event.preventDefault();\r\n         const response = await axios.post(\"http://localhost:4000/order\", {\"cart\":cart}, {\r\n           timeout: 30000\r\n         });\r\n   console.log(response);\r\n   setMessage(response.data.message);\r\n        }catch(err){\r\n   console.log(err);\r\n   setMessage(\"Error occured please try again\");\r\n        }\r\n        \r\n   \r\n   \r\n       }\r\n    \r\n    return(\r\n        <div className={css.checkout}>\r\n      <h2>Web payment coming soon</h2>\r\n      <button onClick={handleSubmit}>Submit order</button>\r\n        </div>\r\n     \r\n    )\r\n}\r\n\r\n\r\nexport default Checkout;"]},"metadata":{},"sourceType":"module"}