{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User PC\\\\workspace\\\\jomed\\\\jomed-pharmacy\\\\pages\\\\admin.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport css from './admin.module.scss';\nimport { useEffect, useState } from \"react\";\nimport Link from 'next/link';\nimport axios from 'axios';\nimport Loading from '../components/loading';\n\nconst Admin = () => {\n  const {\n    0: products,\n    1: setProducts\n  } = useState([\"o\", \"p\"]);\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false);\n  const {\n    0: name,\n    1: setName\n  } = useState();\n  const {\n    0: description,\n    1: setDescription\n  } = useState();\n  const {\n    0: price,\n    1: setPrice\n  } = useState();\n  const {\n    0: category,\n    1: setCategory\n  } = useState();\n  const {\n    0: image,\n    1: setImage\n  } = useState();\n  const {\n    0: buttonText,\n    1: setButtonText\n  } = useState(\"Add product\");\n  useEffect(() => {\n    getProducts();\n  }, []);\n\n  const getProducts = async function () {\n    try {\n      const res = await fetch('http://localhost:4000/products');\n      const data = await res.json();\n      setProducts(data.data);\n    } catch {\n      console.log(\"Unable to load Products\");\n      setProducts(\"\");\n    }\n  };\n\n  const addButton = () => {\n    let elem = document.getElementsByClassName(\"admin_form\")[0];\n    elem.style.display === \"block\" ? elem.style.display = \"none\" : elem.style.display = \"block\";\n\n    if (buttonText === \"Add product\") {\n      setButtonText(\"Close\");\n    } else {\n      setButtonText(\"Add product\");\n    }\n  }; //get form values\n\n\n  const handleChange = e => {\n    console.log(e.target.value);\n\n    switch (e.target.name) {\n      case \"name\":\n        setName(e.target.value);\n        break;\n\n      case \"price\":\n        setPrice(e.target.value);\n        break;\n\n      case \"category\":\n        setCategory(e.target.value);\n        break;\n\n      case \"description\":\n        setDescription(e.target.value);\n        break;\n\n      case \"image\":\n        setImage(e.target.files[0]);\n    }\n\n    console.log(image);\n  }; //submit form data to backend server\n\n\n  const handleSubmit = async e => {\n    setLoading(true);\n    e.preventDefault();\n    var formData = new FormData();\n    formData.append(\"name\", name);\n    formData.append(\"price\", price);\n    formData.append(\"category\", category);\n    formData.append(\"description\", description);\n    formData.append(\"image\", image);\n    const url = 'http://localhost:4000/product';\n\n    try {\n      const response = await axios.post(url, formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        },\n        timeout: 30000\n      });\n\n      if (response.status == 200) {\n        console.log(response);\n        getProducts();\n        setLoading(false);\n      }\n    } catch (error) {\n      console.log(error);\n      setLoading(false);\n    }\n  };\n\n  const handleDelete = async id => {\n    console.log(id);\n    setLoading(true);\n    const url = 'http://localhost:4000/product/' + id;\n\n    try {\n      const response = await axios.delete(url, {\n        timeout: 90000\n      });\n\n      if (response.status == 200) {\n        console.log(response);\n        getProducts();\n        setLoading(false);\n      }\n    } catch (error) {\n      console.log(error);\n      setLoading(false);\n      alert(\"failed to delete\");\n    }\n  };\n\n  if (loading) {\n    return __jsx(Loading, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 10\n      }\n    });\n  }\n\n  return __jsx(\"div\", {\n    className: css.admin,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 9\n    }\n  }, __jsx(\"h1\", {\n    className: css.admin_header,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 1\n    }\n  }, \"Admin Page\"), __jsx(\"div\", {\n    className: css.add_product,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 13\n    }\n  }, __jsx(\"button\", {\n    onClick: addButton,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 5\n    }\n  }, buttonText), __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 17\n    }\n  }, __jsx(\"form\", {\n    className: css.show,\n    className: \"admin_form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 17\n    }\n  }, __jsx(\"label\", {\n    for: \"name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 5\n    }\n  }, \"Name:\"), __jsx(\"input\", {\n    type: \"text\",\n    id: \"name\",\n    name: \"name\",\n    placeholder: \"product name\",\n    value: name,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 5\n    }\n  }), __jsx(\"label\", {\n    for: \"price\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 5\n    }\n  }, \"Price:\"), __jsx(\"input\", {\n    type: \"text\",\n    id: \"price\",\n    name: \"price\",\n    placeholder: \"product price\",\n    value: price,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 5\n    }\n  }), __jsx(\"label\", {\n    for: \"category\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 5\n    }\n  }, \"category:\"), __jsx(\"select\", {\n    id: \"category\",\n    name: \"category\",\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 5\n    }\n  }, __jsx(\"option\", {\n    value: \"antibiotics\",\n    selected: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 7\n    }\n  }, \"Antibiotics\"), __jsx(\"option\", {\n    value: \"antidiabetics\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 7\n    }\n  }, \"Antidiabetics\"), __jsx(\"option\", {\n    value: \"antimaleria\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 7\n    }\n  }, \"Antimaleria\")), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 5\n    }\n  }), __jsx(\"label\", {\n    for: \"image\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 5\n    }\n  }, \"Upload image:\"), __jsx(\"input\", {\n    type: \"file\",\n    id: \"image\",\n    name: \"image\",\n    placeholder: \"Select Image\",\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 5\n    }\n  }), __jsx(\"label\", {\n    for: \"description\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 5\n    }\n  }, \"Description:\"), __jsx(\"textarea\", {\n    type: \"text\",\n    id: \"description\",\n    name: \"description\",\n    placeholder: \"Product Description\",\n    value: description,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 5\n    }\n  }), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 5\n    }\n  }), __jsx(\"button\", {\n    onClick: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 5\n    }\n  }, \"Submit\")))), __jsx(\"table\", {\n    className: css.table,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 2\n    }\n  }, __jsx(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 9\n    }\n  }, __jsx(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 11\n    }\n  }, __jsx(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 15\n    }\n  }, \"Product\")), __jsx(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 15\n    }\n  }, \"Category\")), __jsx(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 15\n    }\n  }, \"Price\")), __jsx(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 15\n    }\n  }, \"In stock\")), __jsx(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 15\n    }\n  }, \"Action\")))), __jsx(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 9\n    }\n  }, products.map(item => __jsx(\"tr\", {\n    key: item.product_id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 13\n    }\n  }, __jsx(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 15\n    }\n  }, __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 17\n    }\n  }, __jsx(\"img\", {\n    src: \"http://localhost:4000/\" + item.image_url,\n    alt: \"\",\n    width: \"40em\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 19\n    }\n  }), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 19\n    }\n  }), __jsx(Link, {\n    href: \"/products/[id]\",\n    as: `/products/${item.id}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 19\n    }\n  }, __jsx(\"a\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 1\n    }\n  }, \" \", item.name)))), __jsx(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 15\n    }\n  }, __jsx(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 17\n    }\n  }, item.category)), __jsx(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 15\n    }\n  }, __jsx(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 17\n    }\n  }, \"\\u20A6 \", item.price)), __jsx(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 15\n    }\n  }, item.quantity), __jsx(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 17\n    }\n  }, __jsx(\"button\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 17\n    }\n  }, __jsx(Link, {\n    href: \"/editproduct/[id]\",\n    as: `/editproduct/${item.product_id}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 25\n    }\n  }, \"Edit\")), __jsx(\"button\", {\n    onClick: () => {\n      handleDelete(item.product_id);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 17\n    }\n  }, \"Delete\")))))));\n};\n\nexport default Admin;","map":{"version":3,"sources":["C:/Users/User PC/workspace/jomed/jomed-pharmacy/pages/admin.js"],"names":["css","useEffect","useState","Link","axios","Loading","Admin","products","setProducts","loading","setLoading","name","setName","description","setDescription","price","setPrice","category","setCategory","image","setImage","buttonText","setButtonText","getProducts","res","fetch","data","json","console","log","addButton","elem","document","getElementsByClassName","style","display","handleChange","e","target","value","files","handleSubmit","preventDefault","formData","FormData","append","url","response","post","headers","timeout","status","error","handleDelete","id","delete","alert","admin","admin_header","add_product","show","table","map","item","product_id","image_url","quantity"],"mappings":"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","sourcesContent":["import css from './admin.module.scss';\r\nimport {useEffect, useState} from \"react\";\r\nimport Link from 'next/link';\r\nimport axios from 'axios';\r\nimport Loading from '../components/loading';\r\n\r\nconst Admin = ()=>{\r\n\r\n    const [products, setProducts] = useState([\"o\",\"p\"]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [name, setName] = useState();\r\n    const [description, setDescription] = useState();\r\n    const [price, setPrice] = useState();\r\n    const [category, setCategory] = useState();\r\n    const [image, setImage] = useState();\r\n    const [buttonText, setButtonText] = useState(\"Add product\");\r\n\r\n    useEffect(()=>{\r\ngetProducts();\r\n    }, []);\r\n\r\n\r\n    const getProducts = async function() {\r\n        try{\r\n      const res = await fetch('http://localhost:4000/products');\r\n          const data = await res.json();\r\n         setProducts(data.data);\r\n        }catch{\r\n      console.log(\"Unable to load Products\");\r\n     setProducts(\"\")\r\n        }\r\n        };\r\n\r\n       const addButton = ()=>{\r\n         \r\n        let elem = document.getElementsByClassName(\"admin_form\")[0];\r\n        elem.style.display === \"block\"?elem.style.display = \"none\":elem.style.display = \"block\";\r\n        if(buttonText===\"Add product\"){\r\n          setButtonText(\"Close\");\r\n        }else{\r\n          setButtonText(\"Add product\");\r\n        }\r\n       }\r\n\r\n\r\n       //get form values\r\n       const handleChange = (e) =>{\r\n         console.log(e.target.value);\r\nswitch(e.target.name){\r\n  case \"name\":\r\n    setName(e.target.value);\r\n      break;\r\n    case \"price\":\r\n      setPrice(e.target.value);\r\n    break;\r\n    case \"category\":\r\n      setCategory(e.target.value);\r\n      break;\r\n    case \"description\":\r\n      setDescription(e.target.value)\r\n      break\r\n   case \"image\":\r\n   setImage(e.target.files[0]);\r\n \r\n       }\r\n       console.log(image);\r\n      }\r\n\r\n      \r\n        //submit form data to backend server\r\n        const handleSubmit =async (e) => {\r\n          setLoading(true);\r\n         e.preventDefault();\r\n         var formData = new FormData();\r\n         formData.append(\"name\", name);\r\n         formData.append(\"price\", price);\r\n         formData.append(\"category\", category);\r\n         formData.append(\"description\", description);\r\n         formData.append(\"image\", image);\r\n         \r\n      const url = 'http://localhost:4000/product';\r\n        try{\r\n        const response = await axios.post(url, formData, {\r\n          headers: {\r\n            'Content-Type': 'multipart/form-data'\r\n          },\r\n          timeout: 30000\r\n        });\r\n        if(response.status==200){\r\n         console.log(response);\r\n         getProducts();\r\n         setLoading(false);\r\n        }\r\n      }\r\n        catch(error){\r\n          console.log(error);\r\n          setLoading(false);\r\n        }\r\n        \r\n        };\r\n\r\n        const  handleDelete = async(id)=>{\r\n          console.log(id);\r\n          setLoading(true);\r\n          const url = 'http://localhost:4000/product/'+id;\r\n          try{\r\n          const response = await axios.delete(url,{\r\n            timeout: 90000\r\n          });\r\n          if(response.status==200){\r\n           console.log(response);\r\n           getProducts();\r\n           setLoading(false);\r\n          }\r\n        }\r\n          catch(error){\r\n            console.log(error);\r\n            setLoading(false);\r\n            alert(\"failed to delete\")\r\n          }\r\n          \r\n          };\r\n      \r\n\r\n\r\nif(loading){\r\n  return <Loading />\r\n}\r\n\r\n    return(\r\n        <div className={css.admin}>\r\n<h1 className={css.admin_header}>Admin Page</h1>\r\n            <div className={css.add_product}>\r\n              {/** Handle show upload form */}\r\n    <button onClick={addButton}>{buttonText}</button>\r\n                <div>\r\n                <form className={css.show} className=\"admin_form\">\r\n    <label for=\"name\">Name:</label>\r\n    <input type=\"text\" id=\"name\" name=\"name\" placeholder=\"product name\" value={name} onChange={handleChange}/>\r\n\r\n    <label for=\"price\">Price:</label>\r\n    <input type=\"text\" id=\"price\" name=\"price\" placeholder=\"product price\" value={price} onChange={handleChange}/>\r\n\r\n    <label for=\"category\">category:</label>\r\n    <select id=\"category\" name=\"category\" onChange={handleChange}>\r\n      <option value=\"antibiotics\" selected>Antibiotics</option>\r\n      <option value=\"antidiabetics\">Antidiabetics</option>\r\n      <option value=\"antimaleria\">Antimaleria</option>\r\n    </select>\r\n    <br />\r\n    <label for=\"image\">Upload image:</label>\r\n    <input type=\"file\" id=\"image\" name=\"image\" placeholder=\"Select Image\"onChange={handleChange}/>\r\n    <label for=\"description\">Description:</label>\r\n    <textarea type=\"text\" id=\"description\" name=\"description\" placeholder=\"Product Description\" value={description} onChange={handleChange} />\r\n    <br/>\r\n    <button onClick={handleSubmit}>Submit</button>\r\n\r\n  </form>\r\n                </div>\r\n            </div>\r\n \r\n <table  className={css.table}>\r\n        <thead>\r\n          <tr>\r\n            <th >\r\n              <div >Product</div>\r\n            </th>\r\n            <th >\r\n              <div >Category</div>\r\n            </th>\r\n            <th >\r\n              <div >Price</div>\r\n            </th>\r\n            <th >\r\n              <div >In stock</div>\r\n            </th>\r\n            <th >\r\n              <div >Action</div>\r\n            </th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {\r\n          products.map((item) => (\r\n            <tr key={item.product_id}>\r\n              <td >\r\n                <div>\r\n                  <img\r\n                    src={\"http://localhost:4000/\"+item.image_url}\r\n                    alt=\"\"\r\n                    width=\"40em\"\r\n                  />\r\n                  <br />\r\n                  <Link href=\"/products/[id]\" as={`/products/${item.id}`}>\r\n<a> {item.name}</a></Link>            \r\n                </div>\r\n\r\n              </td>\r\n              <td >\r\n                <strong>{item.category}</strong>\r\n              </td>\r\n              <td >\r\n                <strong>₦ {item.price}</strong>\r\n              </td>\r\n              <td>\r\n                {item.quantity}\r\n                </td>\r\n                <td>\r\n                <button><Link href=\"/editproduct/[id]\" as={`/editproduct/${item.product_id}`}>Edit</Link></button>\r\n                <button onClick={()=>{handleDelete(item.product_id)}}>Delete</button>\r\n                </td>\r\n            </tr>\r\n           \r\n          ))}\r\n        </tbody>\r\n      </table>\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\n\r\n\r\nexport default Admin;"]},"metadata":{},"sourceType":"module"}