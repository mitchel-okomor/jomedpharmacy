{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{ZMap:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/account\",function(){return t(\"cdae\")}])},bcQz:function(e,a,t){\"use strict\";var n=t(\"q1tI\"),r=Object(n.createContext)();a.a=r},cdae:function(e,a,t){\"use strict\";t.r(a);var n=t(\"q1tI\"),r=t.n(n),l=t(\"GcJg\"),s=t.n(l),o=t(\"o0o1\"),c=t.n(o),i=t(\"rePB\"),u=t(\"IvkB\"),d=t.n(u),p=t(\"vDqi\"),m=t.n(p),f=t(\"PLZj\"),v=t(\"bcQz\"),b=t(\"YFqc\"),g=t.n(b),h=r.a.createElement;function O(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}var w={email:\"\",password:\"\",loading:!1,message:\"\"},y=function(e,a){var t=a.field,n=a.value;return function(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?O(Object(t),!0).forEach((function(a){Object(i.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):O(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}({},e,Object(i.a)({},t,n))},j=function(){var e=Object(n.useContext)(v.a).setCustomer,a=Object(n.useReducer)(y,w),t=a[0],r=a[1],l=function(e){r({field:e.target.name,value:e.target.value})},s=t.email,o=t.password,i=t.loading,u=t.message;return i?h(f.a,null):h(\"div\",{className:d.a.form},h(\"form\",{className:d.a.login},h(\"fieldset\",null,h(\"legend\",null,\"Login:\"),h(\"label\",{for:\"email\"},\"Email:\"),\" \",h(\"br\",null),h(\"input\",{type:\"email\",id:\"email\",name:\"email\",value:s,onChange:l}),h(\"br\",null),h(\"label\",{for:\"password\"},\"password:\"),\" \",h(\"br\",null),h(\"input\",{type:\"password\",id:\"password\",name:\"password\",value:o,onChange:l}),\" \",h(\"br\",null),h(\"button\",{onClick:function(a){var n;return c.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return a.preventDefault(),r({field:\"loading\",value:!0}),\"http://localhost:4000/logincustomer\",l.prev=3,l.next=6,c.a.awrap(m.a.post(\"http://localhost:4000/logincustomer\",t,{timeout:3e4}));case 6:200==(n=l.sent).status?(console.log(\"passed: \"+JSON.stringify(n.data.message)),r({field:\"message\",value:n.data.message}),localStorage.setItem(\"customerId\",n.data.customer.customer_id),localStorage.setItem(\"token\",n.data.info.token),e(n.data.customer),r({field:\"loading\",value:!1})):(console.log(\"failed: \"+n.data),r({field:\"message\",value:n.data.message}),r({field:\"loading\",value:!1})),l.next=15;break;case 10:l.prev=10,l.t0=l.catch(3),console.log(l.t0),r({field:\"message\",value:\"Email or Password Incorrect\"}),r({field:\"loading\",value:!1});case 15:case\"end\":return l.stop()}}),null,null,[[3,10]],Promise)}},\"Submit\"),h(\"br\",null),h(\"div\",{className:d.a.message},u),h(\"div\",{className:d.a.password},h(g.a,{href:\"/resetpassword\"},h(\"a\",null,\"forgot Password\")),\" \"))))},N=t(\"5AOf\"),x=t.n(N),P=r.a.createElement;function _(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}var E={fName:\"\",lName:\"\",email:\"\",number:\"\",address:\"\",password:\"\",loading:!1},C=function(e,a){var t=a.field,n=a.value;return function(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?_(Object(t),!0).forEach((function(a){Object(i.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}({},e,Object(i.a)({},t,n))},T=function(e){var a=Object(n.useReducer)(C,E),t=a[0],r=a[1],l=function(e){r({field:e.target.name,value:e.target.value})},s=t.fName,o=t.lName,i=t.email,u=t.number,d=t.address,p=t.password;return t.loading?P(f.a,null):P(\"form\",{className:x.a.signup},P(\"fieldset\",null,P(\"legend\",null,\"Create Account:\"),P(\"label\",{for:\"fname\"},\"First name:\"),\" \",P(\"br\",null),P(\"input\",{type:\"text\",id:\"fname\",name:\"fName\",value:s,placeholder:\"First Name\",required:!0,onChange:l}),P(\"br\",null),P(\"label\",{for:\"lname\"},\"Last name:\"),\" \",P(\"br\",null),P(\"input\",{type:\"text\",id:\"lname\",name:\"lName\",value:o,placeholder:\"Last Name\",required:!0,onChange:l}),P(\"br\",null),P(\"label\",{for:\"email\"},\"Email:\"),\" \",P(\"br\",null),P(\"input\",{type:\"email\",id:\"email\",name:\"email\",value:i,placeholder:\"johndoe@gmail.com\",required:!0,onChange:l}),P(\"br\",null),P(\"label\",{for:\"number\"},\"phone number:\"),\" \",P(\"br\",null),P(\"input\",{type:\"number\",id:\"number\",name:\"number\",value:u,placeholder:\"+2348090213567\",required:!0,onChange:l}),P(\"br\",null),P(\"label\",{for:\"address\"},\"address:\"),\" \",P(\"br\",null),P(\"input\",{type:\"text\",id:\"address\",name:\"address\",value:d,placeholder:\"4, johnson Street, balogun, Lagos\",required:!0,onChange:l}),P(\"br\",null),P(\"label\",{for:\"password\"},\"password:\"),\" \",P(\"br\",null),P(\"input\",{type:\"password\",id:\"password\",name:\"password\",value:p,required:!0,onChange:l}),P(\"br\",null),P(\"button\",{onClick:function(e){var a;return c.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e.preventDefault(),r({field:\"loading\",value:!0}),\"http://localhost:4000/customer\",console.log(t),n.prev=4,n.next=7,c.a.awrap(m.a.post(\"http://localhost:4000/customer\",t,{timeout:3e4}));case 7:200==(a=n.sent).status&&(console.log(a),localStorage.setItem(\"customerId\",a),r({field:\"loading\",value:!1})),n.next=15;break;case 11:n.prev=11,n.t0=n.catch(4),console.log(n.t0),r({field:\"loading\",value:!1});case 15:case\"end\":return n.stop()}}),null,null,[[4,11]],Promise)}},\"Submit\")))},S=t(\"oOGZ\"),k=t(\"5QNe\"),I=t.n(k),D=r.a.createElement,q=function(){var e=Object(n.useState)(\"\"),a=e[0],t=e[1];Object(n.useEffect)((function(){r()}),[]);var r=function(){var e,a;return c.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c.a.awrap(fetch(\"http://localhost:4000/standingorders/1\",{method:\"GET\",headers:{\"Content-Type\":\"application/json\"}}));case 2:return e=n.sent,n.next=5,c.a.awrap(e.json());case 5:a=n.sent,console.log(a),t(a);case 8:case\"end\":return n.stop()}}),null,null,null,Promise)};return a.data?D(\"div\",null,D(\"ul\",{className:I.a.standingorder},a.data.map((function(e){return D(\"li\",null,D(\"div\",{className:I.a.product},e.productId),D(\"div\",{className:I.a.orderdate},e.date_created.substring(0,-1!=e.date_created.indexOf(\"T\")?e.date_created.indexOf(\"T\"):e.date_created.length)))})))):D(\"div\",{className:I.a.standingorder},a.message)},G=t(\"K942\"),A=t.n(G),B=r.a.createElement,L=function(){var e=Object(n.useState)(\"\"),a=e[0],t=e[1];Object(n.useEffect)((function(){r()}),[]);var r=function(){var e,a;return c.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c.a.awrap(fetch(\"http://localhost:4000/standingprescriptions/1\",{method:\"GET\",headers:{\"Content-Type\":\"application/json\"}}));case 2:return e=n.sent,n.next=5,c.a.awrap(e.json());case 5:a=n.sent,t(a);case 7:case\"end\":return n.stop()}}),null,null,null,Promise)};return a.data?B(\"div\",null,B(\"ul\",{className:A.a.standing_prescription},a.data.map((function(e){return B(\"li\",{key:e.prescription_id},B(\"div\",{className:A.a.prescription},e.d_id),\" \",B(\"div\",{className:A.a.prescription_date},e.date_created.substring(0,-1!=e.date_created.indexOf(\"T\")?e.date_created.indexOf(\"T\"):e.date_created.length)))})))):B(\"div\",{className:A.a.standingprescription},a.message)},Z=t(\"/mYB\"),J=t.n(Z),z=r.a.createElement,F=function(){var e=Object(n.useState)(\"\"),a=e[0],t=e[1];Object(n.useEffect)((function(){r()}),[]);var r=function(){var e,a;return c.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c.a.awrap(fetch(\"http://localhost:4000/prescriptionhistory/1\",{method:\"GET\",headers:{\"Content-Type\":\"application/json\"}}));case 2:return e=n.sent,n.next=5,c.a.awrap(e.json());case 5:a=n.sent,console.log(a),t(a);case 8:case\"end\":return n.stop()}}),null,null,null,Promise)};return a.data?z(\"div\",null,z(\"ul\",{className:J.a.prescriptionhistory},a.data.map((function(e){return z(\"li\",null,z(\"div\",{className:J.a.product},e.productId),\" \",z(\"div\",{className:J.a.orderdate},\" \",e.date_created.substring(0,-1!=e.date_created.indexOf(\"T\")?e.date_created.indexOf(\"T\"):e.date_created.length)))})))):z(\"div\",{className:J.a.prescriptionhistory},a.message)},M=t(\"0cxI\"),Q=t.n(M),R=r.a.createElement,X=function(){var e=Object(n.useState)(\"\"),a=e[0],t=e[1];Object(n.useEffect)((function(){r()}),[]);var r=function(){var e,a;return c.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c.a.awrap(fetch(\"http://localhost:4000/orderhistory/1\",{method:\"GET\",headers:{\"Content-Type\":\"application/json\"}}));case 2:return e=n.sent,n.next=5,c.a.awrap(e.json());case 5:a=n.sent,console.log(a),t(a);case 8:case\"end\":return n.stop()}}),null,null,null,Promise)};return a.data?R(\"div\",null,R(\"ul\",{className:Q.a.order_history},a.data.map((function(e){return R(\"li\",null,R(\"div\",{className:Q.a.product},e.productId),\" \",R(\"div\",{className:Q.a.orderdate},\" \",e.date_created.substring(0,-1!=e.date_created.indexOf(\"T\")?e.date_created.indexOf(\"T\"):e.date_created.length)))})))):R(\"div\",{className:Q.a.order_history},a.message)},Y=t(\"IT5z\"),K=r.a.createElement;a.default=function(e){var a=Object(n.useContext)(v.a).customer;return a&&!Boolean(a.is_admin)?K(\"div\",{className:s.a.container},K(\"div\",{className:s.a.account},K(\"div\",{className:s.a.myaccount},K(\"h2\",null,K(\"b\",null,\"My Account\")),K(\"ul\",null,K(\"li\",null,K(g.a,{href:\"\"},\"Orders\"),\" \"),K(\"li\",null,K(g.a,{href:\"/orderhistory\"},\"Order history\")),K(\"li\",null,K(g.a,{href:\"\"},\"Prescriptions\"),\" \"),K(\"li\",null,K(g.a,{href:\"/prescriptionhistory\"},\"Prescription history\"),\" \"),K(\"li\",null,K(g.a,{href:\"/address\"},\"Address Book\"),\" \"),K(\"li\",null,K(g.a,{href:\"/profile\"},\"Personal information\"),\" \")),K(\"br\",null),K(\"div\",{className:s.a.logout_link},K(g.a,{href:\"\",onClick:function(){return Object(S.a)()}},K(\"a\",null,\"Logout\")))),K(\"div\",{className:s.a.overview},K(\"h2\",null,K(\"b\",null,\"Account overview\")),K(\"div\",{className:s.a.overviewdiv},K(\"div\",{className:s.a.orderoverview},K(\"h2\",null,\"Standing Orders\"),K(q,null)),K(\"div\",null,K(\"h2\",null,\"Order history\"),K(X,null)),K(\"div\",null,K(\"h2\",null,\"Standing Prescription\"),K(L,null)),K(\"div\",null,K(\"h2\",null,\"Prescription history\"),K(F,null)))))):a&&Boolean(a.is_admin)?K(Y.default,null):K(\"div\",{className:s.a.container},K(\"br\",null),K(\"br\",null),K(\"h1\",{className:s.a.heading},\"Account\"),K(\"div\",{className:s.a.account},K(\"div\",{className:s.a.form},K(T,null),K(j,null))))}},oOGZ:function(e,a,t){\"use strict\";a.a=function(){localStorage.removeItem(\"token\"),window.location.reload()}}},[[\"ZMap\",0,1,3,4,5,6,2]]]);","extractedComments":[]}