{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{\"7W2i\":function(e,t,n){var r=n(\"SksO\");e.exports=function(e,t){if(\"function\"!==typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}},D8O5:function(e,t,n){e.exports={admin:\"admin___21G_C\",admin_header:\"admin_header___1qYtx\",add_product:\"add_product___2SV17\",table:\"table___1XKFR\"}},\"GD+O\":function(e,t,n){e.exports={pagelink:\"pagelink___2-f9Q\",loader:\"loader___303lL\",spin:\"spin___aGIZ0\"}},IT5z:function(e,t,n){\"use strict\";n.r(t);var r=n(\"rePB\"),a=n(\"o0o1\"),o=n.n(a),c=n(\"q1tI\"),i=n.n(c),l=n(\"D8O5\"),s=n.n(l),u=n(\"YFqc\"),p=n.n(u),f=n(\"vDqi\"),d=n.n(f),h=n(\"PLZj\"),v=n(\"bcQz\"),m=n(\"nOHt\"),b=i.a.createElement;t.default=function(){var e=Object(m.useRouter)(),t=Object(c.useContext)(v.a).customer,n=Object(c.useState)([\"o\",\"p\"]),a=n[0],i=n[1],l=Object(c.useState)(!1),u=l[0],f=l[1],g=Object(c.useState)(),y=g[0],_=g[1],w=Object(c.useState)(),k=w[0],O=w[1],x=Object(c.useState)(),j=x[0],P=x[1],C=Object(c.useState)(),E=C[0],D=C[1],N=Object(c.useState)(),S=N[0],R=N[1],U=Object(c.useState)(\"Add product\"),q=U[0],I=U[1];Object(c.useEffect)((function(){A()}),[]);var A=function(){var e,t;return o.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,o.a.awrap(fetch(\"http://localhost:4000/products\"));case 3:return e=n.sent,n.next=6,o.a.awrap(e.json());case 6:t=n.sent,i(t.data),n.next=14;break;case 10:n.prev=10,n.t0=n.catch(0),console.log(\"Unable to load Products\"),i(\"\");case 14:case\"end\":return n.stop()}}),null,null,[[0,10]],Promise)},L=function(e){switch(console.log(e.target.value),e.target.name){case\"name\":_(e.target.value);break;case\"price\":P(e.target.value);break;case\"category\":D(e.target.value);break;case\"description\":O(e.target.value);break;case\"image\":R(e.target.files[0])}console.log(S)};return u?b(h.a,null):(t&&Boolean(t.is_admin)||e.push(\"/\"),b(\"div\",{className:s.a.admin},b(\"h1\",{className:s.a.admin_header},\"Admin Page\"),b(\"div\",{className:s.a.add_product},b(\"button\",{onClick:function(){var e=document.getElementsByClassName(\"admin_form\")[0];\"block\"===e.style.display?e.style.display=\"none\":e.style.display=\"block\",I(\"Add product\"===q?\"Close\":\"Add product\")}},q),b(\"div\",null,b(\"form\",Object(r.a)({className:s.a.show},\"className\",\"admin_form\"),b(\"label\",{for:\"name\"},\"Name:\"),b(\"input\",{type:\"text\",id:\"name\",name:\"name\",placeholder:\"product name\",value:y,onChange:L}),b(\"label\",{for:\"price\"},\"Price:\"),b(\"input\",{type:\"text\",id:\"price\",name:\"price\",placeholder:\"product price\",value:j,onChange:L}),b(\"label\",{for:\"category\"},\"category:\"),b(\"select\",{id:\"category\",name:\"category\",onChange:L},b(\"option\",{value:\"antibiotics\",selected:!0},\"Antibiotics\"),b(\"option\",{value:\"antidiabetics\"},\"Antidiabetics\"),b(\"option\",{value:\"antimaleria\"},\"Antimaleria\")),b(\"br\",null),b(\"label\",{for:\"image\"},\"Upload image:\"),b(\"input\",{type:\"file\",id:\"image\",name:\"image\",placeholder:\"Select Image\",onChange:L}),b(\"label\",{for:\"description\"},\"Description:\"),b(\"textarea\",{type:\"text\",id:\"description\",name:\"description\",placeholder:\"Product Description\",value:k,onChange:L}),b(\"br\",null),b(\"button\",{onClick:function(e){var t,n;return o.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return f(!0),e.preventDefault(),(t=new FormData).append(\"name\",y),t.append(\"price\",j),t.append(\"category\",E),t.append(\"description\",k),t.append(\"image\",S),\"http://localhost:4000/product\",r.prev=9,r.next=12,o.a.awrap(d.a.post(\"http://localhost:4000/product\",t,{headers:{\"Content-Type\":\"multipart/form-data\"},timeout:3e4}));case 12:200==(n=r.sent).status&&(console.log(n),A(),f(!1)),r.next=20;break;case 16:r.prev=16,r.t0=r.catch(9),console.log(r.t0),f(!1);case 20:case\"end\":return r.stop()}}),null,null,[[9,16]],Promise)}},\"Submit\")))),b(\"table\",{className:s.a.table},b(\"thead\",null,b(\"tr\",null,b(\"th\",null,b(\"div\",null,\"Product\")),b(\"th\",null,b(\"div\",null,\"Category\")),b(\"th\",null,b(\"div\",null,\"Price\")),b(\"th\",null,b(\"div\",null,\"In stock\")),b(\"th\",null,b(\"div\",null,\"Action\")))),b(\"tbody\",null,a.map((function(e){return b(\"tr\",{key:e.product_id},b(\"td\",null,b(\"div\",null,b(\"img\",{src:\"http://localhost:4000/\"+e.image_url,alt:\"\",width:\"40em\"}),b(\"br\",null),b(p.a,{href:\"/products/[id]\",as:\"/products/\".concat(e.id)},b(\"a\",null,\" \",e.name)))),b(\"td\",null,b(\"strong\",null,e.category)),b(\"td\",null,b(\"strong\",null,\"\\u20a6 \",e.price)),b(\"td\",null,e.quantity),b(\"td\",null,b(\"button\",null,b(p.a,{href:\"/editproduct/[id]\",as:\"/editproduct/\".concat(e.product_id)},\"Edit\")),b(\"button\",{onClick:function(){!function(e){var t,n;o.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return console.log(e),f(!0),t=\"http://localhost:4000/product/\"+e,r.prev=3,r.next=6,o.a.awrap(d.a.delete(t,{timeout:9e4}));case 6:200==(n=r.sent).status&&(console.log(n),A(),f(!1)),r.next=15;break;case 10:r.prev=10,r.t0=r.catch(3),console.log(r.t0),f(!1),alert(\"failed to delete\");case 15:case\"end\":return r.stop()}}),null,null,[[3,10]],Promise)}(e.product_id)}},\"Delete\")))}))))))}},Nsbk:function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},PJYZ:function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}},PLZj:function(e,t,n){\"use strict\";var r=n(\"q1tI\"),a=n.n(r),o=n(\"GD+O\"),c=n.n(o),i=a.a.createElement;t.a=function(e){return i(\"div\",{className:c.a.loading_container},i(\"div\",{className:c.a.loader}),\";\")}},YFqc:function(e,t,n){e.exports=n(\"cTJO\")},a1gu:function(e,t,n){var r=n(\"cDf5\"),a=n(\"PJYZ\");e.exports=function(e,t){return!t||\"object\"!==r(t)&&\"function\"!==typeof t?a(e):t}},bcQz:function(e,t,n){\"use strict\";var r=n(\"q1tI\"),a=Object(r.createContext)();t.a=a},cTJO:function(e,t,n){\"use strict\";var r=n(\"lwsE\"),a=n(\"W8MJ\"),o=n(\"7W2i\"),c=n(\"a1gu\"),i=n(\"Nsbk\");function l(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=i(e);if(t){var a=i(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return c(this,n)}}var s=n(\"TqRt\"),u=n(\"284h\");t.__esModule=!0,t.default=void 0;var p,f=u(n(\"q1tI\")),d=n(\"QmWs\"),h=n(\"g/15\"),v=s(n(\"nOHt\")),m=n(\"elyg\");function b(e){return e&&\"object\"===typeof e?(0,h.formatWithValidation)(e):e}var g=new Map,y=window.IntersectionObserver,_={};function w(){return p||(y?p=new y((function(e){e.forEach((function(e){if(g.has(e.target)){var t=g.get(e.target);(e.isIntersecting||e.intersectionRatio>0)&&(p.unobserve(e.target),g.delete(e.target),t())}}))}),{rootMargin:\"200px\"}):void 0)}var k=function(e){o(n,e);var t=l(n);function n(e){var a;return r(this,n),(a=t.call(this,e)).p=void 0,a.cleanUpListeners=function(){},a.formatUrls=function(e){var t=null,n=null,r=null;return function(a,o){if(r&&a===t&&o===n)return r;var c=e(a,o);return t=a,n=o,r=c,c}}((function(e,t){return{href:(0,m.addBasePath)(b(e)),as:t?(0,m.addBasePath)(b(t)):t}})),a.linkClicked=function(e){var t=e.currentTarget,n=t.nodeName,r=t.target;if(\"A\"!==n||!(r&&\"_self\"!==r||e.metaKey||e.ctrlKey||e.shiftKey||e.nativeEvent&&2===e.nativeEvent.which)){var o=a.formatUrls(a.props.href,a.props.as),c=o.href,i=o.as;if(function(e){var t=(0,d.parse)(e,!1,!0),n=(0,d.parse)((0,h.getLocationOrigin)(),!1,!0);return!t.host||t.protocol===n.protocol&&t.host===n.host}(c)){var l=window.location.pathname;c=(0,d.resolve)(l,c),i=i?(0,d.resolve)(l,i):c,e.preventDefault();var s=a.props.scroll;null==s&&(s=i.indexOf(\"#\")<0),v.default[a.props.replace?\"replace\":\"push\"](c,i,{shallow:a.props.shallow}).then((function(e){e&&s&&(window.scrollTo(0,0),document.body.focus())}))}}},a.p=!1!==e.prefetch,a}return a(n,[{key:\"componentWillUnmount\",value:function(){this.cleanUpListeners()}},{key:\"getPaths\",value:function(){var e=window.location.pathname,t=this.formatUrls(this.props.href,this.props.as),n=t.href,r=t.as,a=(0,d.resolve)(e,n);return[a,r?(0,d.resolve)(e,r):a]}},{key:\"handleRef\",value:function(e){var t=this;this.p&&y&&e&&e.tagName&&(this.cleanUpListeners(),_[this.getPaths().join(\"%\")]||(this.cleanUpListeners=function(e,t){var n=w();return n?(n.observe(e),g.set(e,t),function(){try{n.unobserve(e)}catch(t){console.error(t)}g.delete(e)}):function(){}}(e,(function(){t.prefetch()}))))}},{key:\"prefetch\",value:function(e){if(this.p){var t=this.getPaths();v.default.prefetch(t[0],t[1],e).catch((function(e){0})),_[t.join(\"%\")]=!0}}},{key:\"render\",value:function(){var e=this,t=this.props.children,n=this.formatUrls(this.props.href,this.props.as),r=n.href,a=n.as;\"string\"===typeof t&&(t=f.default.createElement(\"a\",null,t));var o=f.Children.only(t),c={ref:function(t){e.handleRef(t),o&&\"object\"===typeof o&&o.ref&&(\"function\"===typeof o.ref?o.ref(t):\"object\"===typeof o.ref&&(o.ref.current=t))},onMouseEnter:function(t){o.props&&\"function\"===typeof o.props.onMouseEnter&&o.props.onMouseEnter(t),e.prefetch({priority:!0})},onClick:function(t){o.props&&\"function\"===typeof o.props.onClick&&o.props.onClick(t),t.defaultPrevented||e.linkClicked(t)}};return!this.props.passHref&&(\"a\"!==o.type||\"href\"in o.props)||(c.href=a||r),f.default.cloneElement(o,c)}}]),n}(f.Component);t.default=k},rePB:function(e,t,n){\"use strict\";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,\"a\",(function(){return r}))}}]);","extractedComments":[]}